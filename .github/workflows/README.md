# GitHub Actions 自動デプロイ設定

このディレクトリには、GitHubからGMOクラウドサーバーへの自動デプロイを設定するためのワークフローファイルが含まれています。

## deploy-to-gmo.yml

このワークフローは以下のタイミングで実行されます：
- `main`ブランチにプッシュされたとき
- 手動で実行したとき（GitHub上でワークフローをトリガー）

## 必要なシークレット設定

このワークフローを正常に動作させるためには、GitHubリポジトリに以下のシークレット（秘密情報）を設定する必要があります：

| シークレット名 | 説明 |
|------------|------|
| `SSH_PRIVATE_KEY` | GMOクラウドサーバーへ接続するためのSSH秘密鍵（秘密鍵全体を登録） |
| `SSH_USERNAME` | GMOクラウドサーバーのSSHユーザー名 |
| `SSH_HOST` | GMOクラウドサーバーのホスト名またはIPアドレス |
| `KNOWN_HOSTS` | サーバーの公開鍵情報（`ssh-keyscan <hostname>` コマンドで取得可能） |
| `REMOTE_PATH` | デプロイ先のサーバー上のディレクトリパス（例：`/var/www/html/`） |

## シークレットの設定方法

1. GitHubリポジトリのページにアクセス
2. 「Settings」タブをクリック
3. 左側のメニューから「Secrets and variables」→「Actions」を選択
4. 「New repository secret」ボタンをクリック
5. 必要な各シークレットの名前と値を入力して保存

## 注意事項

- SSH鍵は新しく作成することをお勧めします（既存の個人用の鍵を使用しないでください）
- サーバー側では、デプロイユーザーが対象ディレクトリに書き込み権限を持っていることを確認してください
- 初回デプロイ前にサーバー側で対象ディレクトリを作成しておく必要があります 